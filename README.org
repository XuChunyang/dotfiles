#+TITLE: My Dotfiles in Org mode
#+CATEGORY: dotfiles

* Meta                                                             :dotfiles:

** How to use this file?

- To extract dotfiles (such as ~~/.bash_profile~) from this file, type
  ~C-c C-v t~ (~org-babel-tangle~) in Emacs.
- To propagate changes in dotfiles (such as ~~/.bash_profile~) to this
  file, type ~M-x org-babel-detangle~ in Emacs.

** TODO Safer tangle by preventing overriding or showing diff before overriding?

** Resources

- [[https://dotfiles.github.io/][GitHub does dotfiles - dotfiles.github.io]]
- [[https://github.com/webpro/awesome-dotfiles][webpro/awesome-dotfiles: A curated list of dotfiles resources.]]
- [[https://github.com/mathiasbynens/dotfiles][mathiasbynens/dotfiles: .files, including ~/.macos — sensible hacker defaults for macOS]]

* Passwords                                                       :passwords:
  :PROPERTIES:
  :CRYPTKEY: mail@xuchunyang.me
  :END:

To view and edit these passwords, type ~M-x org-encrypt-entries~.

During ~org-babel-tangle~, it might be too annoying by asking for
which key to use for encryption each time, use the following
work-around to bypass it.

#+BEGIN_SRC emacs-lisp :results silent
  (require 'org-crypt)
  (setq org-crypt-key "mail@xuchunyang.me")
  (define-advice org-babel-tangle (:around (old-fun &rest r) shutup-epa-file)
    "Shut up epa-file.

  `epa-file' will prompt for which key to use for encryption each
  time if `epa-file-encrypt-to' is not set locally, however it looks like
  local variables embedded in comment will not applied during org-tangle."
    (with-current-buffer (current-buffer)
      (cl-assert (eq major-mode 'org-mode))
      (let (before-save-hook)
        (org-decrypt-entries)
        (save-buffer)
        (define-advice write-region (:before (&rest r) set-epa-file-encrypt-to)
          (setq-local epa-file-encrypt-to org-crypt-key))
        (unwind-protect
            (apply old-fun r)
          (advice-remove 'write-region #'write-region@set-epa-file-encrypt-to))
        (org-encrypt-entries)
        (save-buffer))))
#+END_SRC

** ~/.authinfo.gpg                                                    :crypt:
   :PROPERTIES:
   :header-args: :tangle ~/.authinfo.gpg :comments link :tangle-mode (identity #o600)
   :END:
-----BEGIN PGP MESSAGE-----
Version: GnuPG v2

hQIMA+LcwErZWE+CAQ//UgTNi5nzAa4IT3gxze5h89bJojANIiANZEYBOpObCKtL
x4vDuDf2FO7BMIScnWOUfWyOGsOfSevOegZcJ2vFhw0ozwzpUqYWRLH8J14yyXve
aLoe+z5/zeV8Al37z+odncbjAgbHF2tasXDM1Pw3KLNTJFjUZGLxcXdn2DvhWh9J
HHMbdTxraYU2Np/QcWYQEwLoZY3SUv6Sg2mx9lco1po5qTN56kvUWvUHq4dVJFL0
Y9E81Lyul4KpgX/KINApl/xQhPcx/PjSkZjYKICczbsmsjPj0ZPBwOAiW0nu5YDP
v5yjmmjqSLGmSH3FBvD7WXlCpkxBXRtQHw+Hrkhymx9FLzbSG/+gE+d3wauD1Xp3
KOO7bUkU3lRdlvYI/TmlN/pzCfnpBDQTWtp123trHt6DkfE3ixpwZP4onb3hV7hg
S18ZKD6lJmtSIasSGZRw6OFfBHgVkCmrBqOrQTBn7BE28ymYAmv5GzhvYalcv/vg
0vnFtVbIOmNv+rMHuhrCRQwSdBrOvuQUOZ7WAaBuxpCAQmZRLOCLBFFgXK7L3ksd
DrI3lEAxdYVk6OtaspqKt7Puj95aeFW6MkiUnBPz/ABMYpr4sFPevzVnZ6u3id3r
4HhSLo4fWy6xneTqbz5cHp6IW+VSOy7gGRXusb5KckRVa1Lw40hEbsWPYjVcfybS
wGIB+uSobb0nKXxmvmminyyqK5skaX/Pprb7cgNfLZlfK2XXobYJSrmd75EY2ih5
Zz/9cfQ65HzGzUyUI/v3adx0wS/tUGuWTeAAkSMBSQKtwWv+uuw6Y2qnnJZua7Ks
N4SUfNWEoBxZf1OGD8bbva+r4dCkV0HUeyCLQLX+5zENpnd/zkksSZ/+00s/xc0t
8BY7ixOyMwgxnHAGSLg8HSuZQkyZXln6m1b+fJqIGmespvLM7M0Bk89dM39mxhsO
EeosraXY5guovrkQzApYdUS0Fhv3Omjq48SDnOFt6spej/q1bm5hWkfdvkJjpsBp
WI64xz5wWeKuaNYapFBpCGHZuChIGf7Xu6CLxDtzQZREtaGDIDfOO3y8Du5DRyMQ
iqK6HQ==
=wAhN
-----END PGP MESSAGE-----

* Bash                                                                 :bash:
  :PROPERTIES:
  :header-args:bash: :tangle ~/.bash_profile :comments link
  :END:

** ~~/.bashrc~ vs ~~/.bash_profile~

   Don't use [[file:~/.bashrc][file:~/.bashrc]] to keep configuration, use
   [[file:~/.bash_profile][file:~/.bash_profile]] instead.

   #+BEGIN_SRC bash :tangle ~/.bashrc :comments link
     # The variable PS1 is unset in non-interactive shells:
     # [[https://www.gnu.org/software/bash/manual/html_node/Is-this-Shell-Interactive_003f.html][Bash Reference Manual: Is this Shell Interactive?]]
     if [ -z "$PS1" ]; then
         # This shell is not interactive
         source ~/.path
     else
         # This shell is interactive
         source ~/.bash_profile
     fi
   #+END_SRC

** OS detection

   #+BEGIN_SRC bash
     function is_mac () {
         [[ "$OSTYPE" =~ ^darwin ]]
     }

     function is_gnu_linux () {
         [[ "$OSTYPE" == linux-gnu ]]
     }
   #+END_SRC

** Helper

   #+BEGIN_SRC bash
     function source_maybe () {
         local file="$1"
         [ -r "$file" ] && [ -f "$file" ] && source "$file"
     }
   #+END_SRC

** Startup

   #+BEGIN_SRC bash
     # Add `~/bin` to the `$PATH`
     export PATH="$HOME/bin:$PATH"

     # Load the shell dotfiles, and then some:
     # * ~/.path can be used to extend `$PATH`.
     # * ~/.extra can be used for other settings you don’t want to commit.
     for file in ~/.{path,bash_prompt,exports,aliases,functions,extra}; do
         source_maybe "$file"
     done
     unset file
   #+END_SRC

** ~$PATH~ in [[file:~/.path][file:~/.path]]

   Here’s an example ~~/.path~ file that adds ~/usr/local/bin~ to the ~$PATH~:
   #+BEGIN_SRC bash :tangle no
   export PATH="/usr/local/bin:$PATH"
   #+END_SRC

** Prompt

   #+BEGIN_SRC bash
     # Looks like "~$ " in $HOME ("~" is in blue)
     PS1="\[\e[34m\]\w\[\e[m\]\\$ "
   #+END_SRC

** Other Environment variables in [[file:~/.exports][file:~/.exports]]

   #+BEGIN_SRC bash :tangle ~/.exports :comments link :shebang "#!/usr/bin/env bash" :tangle-mode (identity #o644)
     # Make Emacs the default editor.
     export EDITOR='emacsclient'
     export VISUAL='emacsclient'

     # Enable support of searching Chinese for Notmuch
     export XAPIAN_CJK_NGRAM=1
   #+END_SRC

** Aliases in [[file:~/.aliases][file:~/.aliases]]

   #+BEGIN_SRC bash :tangle ~/.aliases :comments link :shebang "#!/usr/bin/env bash" :tangle-mode (identity #o644)
     # Detect which `ls` flavor is in use
     if ls --color > /dev/null 2>&1; then # GNU `ls`
         colorflag="--color"
         export LS_COLORS='no=00:fi=00:di=01;31:ln=01;36:pi=40;33:so=01;35:do=01;35:bd=40;33;01:cd=40;33;01:or=40;31;01:ex=01;32:*.tar=01;31:*.tgz=01;31:*.arj=01;31:*.taz=01;31:*.lzh=01;31:*.zip=01;31:*.z=01;31:*.Z=01;31:*.gz=01;31:*.bz2=01;31:*.deb=01;31:*.rpm=01;31:*.jar=01;31:*.jpg=01;35:*.jpeg=01;35:*.gif=01;35:*.bmp=01;35:*.pbm=01;35:*.pgm=01;35:*.ppm=01;35:*.tga=01;35:*.xbm=01;35:*.xpm=01;35:*.tif=01;35:*.tiff=01;35:*.png=01;35:*.mov=01;35:*.mpg=01;35:*.mpeg=01;35:*.avi=01;35:*.fli=01;35:*.gl=01;35:*.dl=01;35:*.xcf=01;35:*.xwd=01;35:*.ogg=01;35:*.mp3=01;35:*.wav=01;35:'
     else # macOS `ls`
         colorflag="-G"
         export LSCOLORS='BxBxhxDxfxhxhxhxhxcxcx'
     fi

     # List all files colorized in long format
     alias l="ls -lF ${colorflag}"

     # List all files colorized in long format, including dot files
     alias la="ls -laF ${colorflag}"

     # List only directories
     alias lsd="ls -lF ${colorflag} | grep --color=never '^d'"

     # Always use color output for `ls`
     alias ls="command ls ${colorflag}"

     # Enable aliases to be sudo’ed
     alias sudo='sudo '

     # Stopwatch
     alias timer='echo "Timer started. Stop with Ctrl-D." && date && time cat && date'

     # IP addresses
     alias ip="dig +short myip.opendns.com @resolver1.opendns.com"
     alias localip="ipconfig getifaddr en0"
     alias ips="ifconfig -a | grep -o 'inet6\? \(addr:\)\?\s\?\(\(\([0-9]\+\.\)\{3\}[0-9]\+\)\|[a-fA-F0-9:]\+\)' | awk '{ sub(/inet6? (addr:)? ?/, \"\"); print }'"

     # Reload the shell (i.e. invoke as a login shell)
     alias reload="exec $SHELL -l"

     # Print each PATH entry on a separate line
     alias path='echo -e ${PATH//:/\\n}'
   #+END_SRC

** Completion

   #+BEGIN_SRC bash
     # Add tab completion for many Bash commands (MacPorts)
     if is_mac && [ -f /opt/local/etc/profile.d/bash_completion.sh ]; then
         . /opt/local/etc/profile.d/bash_completion.sh
     elif is_gnu_linux && [ -f /usr/share/bash-completion/bash_completion ]; then
         . /usr/share/bash-completion/bash_completion
     fi
   #+END_SRC

*** Personal bash completion in [[file:~/.bash_completion][file:~/.bash_completion]]

    #+BEGIN_SRC bash :tangle ~/.bash_completion :comments link
      command -v pandoc &>/dev/null && eval "$(pandoc --bash-completion)"

      # Use a custom version: 1) enable git-ls-files 2) support the alias dotfiles
      # cp /usr/share/bash-completion/completions/git ~/.git-completion.bash
      source_maybe "~/.git-completion.bash"

      source_maybe "/Applications/Docker.app/Contents/Resources/etc/docker.bash-completion"

      _emacs ()
      {
          local cur prev opts
          COMPREPLY=()
          cur="${COMP_WORDS[COMP_CWORD]}"
          prev="${COMP_WORDS[COMP_CWORD-1]}"
          opts='--help --version -L --directory --l --load --script --daemon --debug-init -Q --reverse-video --no-desktop --no-window-system --batch --eval --funcall'

          case $prev in
              --help|--version)
                  return
                  ;;
              -L|--directory)
                  COMPREPLY=( $(compgen -d ${cur}) )
                  return
                  ;;
              -l|--load|--script)
                  COMPREPLY=( $(compgen -f ${cur}) )
                  return
                  ;;
          esac

          COMPREPLY=( $(compgen -f -W "${opts}" -- ${cur}) )
      }
      complete -F _emacs emacs

      _emacsclient ()
      {
          local cur prev opts
          COMPREPLY=()
          cur="${COMP_WORDS[COMP_CWORD]}"
          prev="${COMP_WORDS[COMP_CWORD-1]}"
          opts='
          --version
          --help
          --tty
          --create-frame
          --eval
          --no-wait
          --quiet
          --socket-name
          --server-file
          --alternate-editor
          '

          COMPREPLY=( $(compgen -f -W "${opts}" -- ${cur}) )
      }
      complete -F _emacsclient emacsclient
    #+END_SRC


** History

   The following settings of Bash history is copied from [[https://sanctum.geek.nz/arabesque/better-bash-history/][Better Bash history | Arabesque]].

   #+BEGIN_SRC bash
     # Append history instead of rewriting it
     shopt -s histappend

     # Allow a larger history file
     HISTFILESIZE=1000000
     HISTSIZE=1000000

     # Don’t store specific lines
     HISTCONTROL=ignoreboth
     HISTIGNORE='ls:bg:fg:history'

     # Record timestamps
     HISTTIMEFORMAT='%F %T '

     # Use one command per line
     shopt -s cmdhist

     # Store history immediately
     PROMPT_COMMAND='history -a'
   #+END_SRC

*** TODO Read [[https://sanctum.geek.nz/arabesque/better-bash-history/][Better Bash history | Arabesque]] again

** Change directory

   #+BEGIN_SRC bash
     # Enable some Bash 4 features when possible:
     # * `autocd`, e.g. `**/qux` will enter `./foo/bar/baz/qux`
     # * Recursive globbing, e.g. `echo **/*.txt`
     for option in autocd globstar; do
         shopt -s "$option" 2> /dev/null
     done
   #+END_SRC

   Setup [[https://github.com/rupa/z][rupa/z: z - jump around]]:

   #+BEGIN_SRC bash
     if is_mac; then
         file=/opt/local/etc/profile.d/z.sh
     elif is_gnu_linux; then
         file=/etc/profile.d/z.sh
     fi

     if [ -f "$file" ]; then
         source "$file"
     else
         echo "Can't source $file, install it from <https://github.com/rupa/z>"
     fi
     unset file
   #+END_SRC

** Emacs

   [[file:~/.emacs.d/misc/emacs.sh][file:~/.emacs.d/misc/emacs.sh]] includes shell functions to launch
   Emacs's functions (such as Magit and ~C-x C-f~) inside
   Shell/Terminal.

   #+BEGIN_SRC bash
     source ~/.emacs.d/misc/emacs.sh
   #+END_SRC

** Resources

*** Style Guides
    - [[https://google.github.io/styleguide/shell.xml][Google Shell Style Guide]]
    - [[https://github.com/bahamas10/bash-style-guide][bahamas10/bash-style-guide: A style guide for writing safe, predictable, and portable bash scripts (not sh!)]]

*** Guides
    - [[http://tldp.org/LDP/abs/html/][Advanced Bash-Scripting Guide]]
    - [[http://wiki.bash-hackers.org/start][The Bash Hackers Wiki {Bash Hackers Wiki}]]

*** Tools    
    - [[https://github.com/Bash-it/bash-it][Bash-it/bash-it: A community Bash framework.]]
    - [[https://github.com/koalaman/shellcheck][koalaman/shellcheck: ShellCheck, a static analysis tool for shell scripts]]

* OfflineIMAP

Write a Python Script [[file:~/.offlineimap.py][file:~/.offlineimap.py]] to extract IMAP password
from [[file:~/.authinfo.gpg][file:~/.authinfo.gpg]]. I don't know Python, the following is based
on [[http://quotenil.com/OfflineIMAP-with-Encrypted-Authinfo.html][Gábor Melis' () blog - OfflineIMAP with Encrypted Authinfo]].

#+BEGIN_SRC python :tangle ~/.offlineimap.py :comments link :shebang "#!/usr/bin/env python2" :tangle-mode (identity #o644)
  import re, os
  from distutils.spawn import find_executable

  def get_authinfo_password(machine, login):
      s = "machine %s login %s password ([^ ]*)\n" % (machine, login)
      p = re.compile(s)
      if find_executable("gpg2"):
          authinfo = os.popen("gpg2 -q --no-tty -d ~/.authinfo.gpg").read()
      else:
          authinfo = os.popen("gpg -q --no-tty -d ~/.authinfo.gpg").read()
      return p.search(authinfo).group(1)
#+END_SRC

#+BEGIN_SRC conf :tangle ~/.offlineimaprc :comments link
  [general]
  pythonfile = ~/.offlineimap.py
  accounts = Personal

  [Account Personal]
  localrepository = Local
  remoterepository = Remote

  [Repository Local]
  type = Maildir
  localfolders = ~/Maildir

  [Repository Remote]
  type = IMAP

  remotehost = imap.exmail.qq.com
  remoteuser = mail@xuchunyang.me
  remotepasseval = get_authinfo_password("imap.exmail.qq.com", "mail@xuchunyang.me")
  folderfilter = lambda folder: folder in ['INBOX', 'Drafts', 'Deleted Messages', 'Junk', 'Sent Messages', 'Archives']
  sslcacertfile = /opt/local/etc/openssl/cert.pem
#+END_SRC

** Resources
- [[https://wiki.archlinux.org/index.php/OfflineIMAP][OfflineIMAP - ArchWiki]]

* Git                                                                   :git:

** ~/.gitignore

   #+BEGIN_SRC gitignore :tangle ~/.gitignore :comments link
     # Folder view configuration files
     .DS_Store
   #+END_SRC

** ~/.gitconfig

   #+BEGIN_SRC gitconfig :tangle ~/.gitconfig :comments link
     [user]
             name = Chunyang Xu
             email = mail@xuchunyang.me
             signingkey = A952083AF6D0A8BF
     [gpg]
             program = gpg2
     [credential]
             helper = osxkeychain
     [http]
             proxy = socks5://localhost:1080
   #+END_SRC

* SSH                                                                   :ssh:
** ~/.ssh/id_rsa                                                      :crypt:
-----BEGIN PGP MESSAGE-----
Version: GnuPG v2

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
=Muag
-----END PGP MESSAGE-----

** ~/.ssh/id_rsa.pub

   #+BEGIN_SRC text :mkdirp yes :tangle ~/.ssh/id_rsa.pub
   ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAACAQDHOci6JWgdNE8oxyuGOSSt2Ekn2VIhWMv9ipCAlBa+b+KDneA8kFOo2CdtvEywyv0/z7++DVA0j6Y7QMK4vh1H6PdD+N84ZL2wHXGlWCliYl2wlGhvefOaV3YVgTz4L3TQCsXnmCAWiFNzWAp+dHibgYuy0Sk2+vftcCpwgWFvMYZ5e/8HMNaAYA/aNauWivci1k6VzSmr2XToxOfyeXfkhmPsM3rnHxQbmW2CZJ4L5y0P8innLJSC8MC4zzddbqazHB+KbZYGGXFrJ4BPXN9zst+Q+mNZGCEg/fz8X6X92+C8zyvNgHM6sLPRqsKqpTIjqjGnIbuVCT7E8J8AzwiIUcRIjpeyYeJl5dnh1d1GQcFoa6ZRdhfZ7hMLUvxSsEPflrwdw8UqE6SOIOGi7r2C8FTnoXYkOipff6u0fngSq9CFQ7WQHqgIA1ABnq243EojimwARqcSHbhrWyUxY0D6Q7rs51nHXTOawnFr/46na0CI6sxTv3h6uGfjt5KBn56Y8meHHQlpsk1NR3R2P5UAOA0+xu7MsJUN3b4/xmALUIO6Eiz1ph25umEJC9sWuE6dMm9Wta+s6yLREdHZtV5YnTr1b/79lGLrbJlavTqf2jnBQAewRpMvRpSzVzbtRY8Ucq1+fL3/0eJTXUCAIrOiTAnRhfVqmzcFgftHnXdYuQ== mail@xuchunyang.me
   #+END_SRC

** ~/.ssh/config

   #+BEGIN_SRC conf :mkdirp yes :tangle ~/.ssh/config :comments link
     Host *
          # If the network connection is down, don't hang
          ServerAliveInterval 5
          # Master Connection
          # https://unix.stackexchange.com/questions/2857/ssh-easily-copy-file-to-local-system
          ControlMaster auto
          ControlPath ~/.ssh/control:%h:%p:%r

     Host vps
          HostName xuchunyang.me
          User root

     Host elpa
          HostName elpa.emacs-china.org
          User root

     Host pc
          Hostname 192.168.0.105
          User xcy
   #+END_SRC

* GnuPG                                                                 :gpg:

I have made a backup for my GPG keys in my USB disk with

#+BEGIN_SRC sh
mkdir -v -p /Volumes/USB/backup/gnupg
cp -v ~/.gnupg/*.gpg /Volumes/USB/backup/gnupg
#+END_SRC

To resture these keys, use

#+BEGIN_SRC sh
cp /Volumes/USB/backup/gnupg/*.gpg ~/.gnupg
#+END_SRC

This method is from [[https://gist.github.com/chrisroos/1205934][Instructions for exporting/importing
(backup/restore) GPG keys]].

* nano

  参考 [[file:/opt/local/share/doc/nano/sample.nanorc][file:/opt/local/share/doc/nano/sample.nanorc]]

  #+BEGIN_SRC conf :tangle ~/.nanorc :comments link
    ## Use the blank line below the titlebar as extra editing space.
    set morespace

    ## Switch on multiple file buffers (inserting a file will put it into
    ## a separate buffer).
    set multibuffer

    ## Remember the cursor position in each file for the next editing session.
    set positionlog

    ## Use smooth scrolling as the default.
    set smooth

    ## Allow nano to be suspended.
    set suspend

    ## Syntax highlight.
    include "/opt/local/share/nano/*.nanorc"

    ## Key bindings.
    ## See nanorc(5) (section REBINDING KEYS) for more details on this.
    bind ^S savefile main
    bind M-Q findprevious main
    bind M-W findnext main
  #+END_SRC
